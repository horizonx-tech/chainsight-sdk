---
source: chainsight-cdk-macros/src/storages.rs
expression: formatted
---
#[ic_cdk::query]
#[candid::candid_method(query)]
fn get_account(id: String) -> Option<Account> {
    _get_account(id)
}
fn _get_account(id: String) -> Option<Account> {
    Account::get(id.as_str())
}
#[ic_cdk::update]
#[candid::candid_method(update)]
async fn proxy_get_account(input: std::vec::Vec<u8>) -> std::vec::Vec<u8> {
    use chainsight_cdk::rpc::Receiver;
    chainsight_cdk::rpc::ReceiverProvider::<String, Option<Account>>::new(proxy(), _get_account)
        .reply(input)
        .await
}
#[ic_cdk::query]
#[candid::candid_method(query)]
fn between_account(a: (String, String)) -> Vec<(String, Account)> {
    _between_account(a)
}
fn _between_account(a: (String, String)) -> Vec<(String, Account)> {
    Account::between(a.0.as_str(), a.1.as_str())
}
#[ic_cdk::update]
#[candid::candid_method(update)]
async fn proxy_between_account(input: std::vec::Vec<u8>) -> std::vec::Vec<u8> {
    use chainsight_cdk::rpc::Receiver;
    chainsight_cdk::rpc::ReceiverProvider::<(String, String), Vec<(String, Account)>>::new(
        proxy(),
        _between_account,
    )
    .reply(input)
    .await
}
#[ic_cdk::query]
#[candid::candid_method(query)]
fn last_account(n: u64) -> Vec<(String, Account)> {
    _last_account(n)
}
fn _last_account(n: u64) -> Vec<(String, Account)> {
    Account::last(n)
}
#[ic_cdk::update]
#[candid::candid_method(update)]
async fn proxy_last_account(input: std::vec::Vec<u8>) -> std::vec::Vec<u8> {
    use chainsight_cdk::rpc::Receiver;
    chainsight_cdk::rpc::ReceiverProvider::<u64, Vec<(String, Account)>>::new(
        proxy(),
        _last_account,
    )
    .reply(input)
    .await
}
impl Account {
    pub fn get(id: &str) -> Option<Self> {
        Self::get_store().get(id)
    }
    pub fn put(&self, id: &str) {
        Self::get_store().set(id, self.clone())
    }
    pub fn between(from: &str, to: &str) -> Vec<(String, Self)> {
        Self::get_store().between(from, to)
    }
    pub fn last(n: u64) -> Vec<(String, Self)> {
        Self::get_store().last(n)
    }
    fn get_store() -> chainsight_cdk::storage::KeyValueStore {
        chainsight_cdk::storage::KeyValueStore::new(1u8)
    }
}

